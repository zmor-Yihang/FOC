# SVPWM占空比分布不对称导致电流采样异常

## 问题现象

使用教科书风格的七段式SVPWM代码时，电机电流采样值不正确。

## 原因分析

原代码计算切换时间点的方式有误：

```c
/* 错误写法 */
Ta = (1.0f - (Tx + Ty)) / 4.0f;  // 零矢量时间/4
Tb = Tx / 2.0f + Ta;
Tc = Ty / 2.0f + Tb;
```

这样计算出的 `Ta, Tb, Tc` 是PWM切换时刻，不是占空比。直接当占空比使用会导致：

- 输出范围约 `[0.125, 0.625]`，中心点在 0.375 附近
- 占空比分布偏向低端，不是围绕 0.5 对称

## 对电流采样的影响

FOC通常在PWM周期中心（计数器峰值或谷值）采样电流。占空比分布不对称时：

1. 某些相下桥臂导通时间过短
2. 采样点可能落在死区或开关噪声区
3. 采样窗口不足，电流值不准确

## 解决方案

修改占空比计算，使输出围绕 0.5 中心分布：

```c
/* 正确写法 */
T0_half = (1.0f - Tx - Ty) * 0.5f;

/* 根据扇区分配 (以扇区1为例) */
duty.a = Ty + T0_half;           // 中间相
duty.b = T0_half;                // 最低相  
duty.c = Tx + Ty + T0_half;      // 最高相
```

输出范围 `[0, 1.0]`，围绕 0.5 对称分布，保证采样窗口正确。

## 注意事项

- 中心对齐模式设置CCR时需要乘2，但这只解决CCR映射问题，不能修复占空比分布不对称
- 三种SVPWM实现（扇区法、教科书法、min-max法）输出应保持一致，便于切换验证
